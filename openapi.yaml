openapi: 3.1.0
info:
  title: Quote Builder API
  description: Generate government fleet quotes as downloadable PDFs using vehicle and pricing data.
  version: 1.0.1
servers:
  - url: https://quote-api-qflm.onrender.com
paths:
  /api/generate-quote:
    post:
      operationId: generateQuote
      summary: Generate a quote PDF
      description: >
        Submits vehicle, pricing, and customer data to generate a fleet quote as a downloadable PDF.
        The response includes a direct `downloadUrl` to the hosted PDF generated by DocRaptor.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [customer, dealership, vehicles]
              properties:
                quoteNumber:
                  type: string
                  description: Automatically generated quote number (e.g. SAG-1001-AI).
                customer:
                  type: string
                  description: The name of the customer or government agency receiving the quote.
                  example: City of Laredo Police Department
                dealership:
                  type: string
                  description: The name of the dealership issuing the quote.
                  example: Sames Laredo Chevrolet
                vehicles:
                  type: array
                  description: List of vehicles included in the quote.
                  items:
                    type: object
                    required: [year, make, model, contract, quantity]
                    properties:
                      year:
                        type: string
                        example: "2025"
                      make:
                        type: string
                        example: Chevrolet
                      model:
                        type: string
                        example: Tahoe PPV
                      contract:
                        type: string
                        example: TIPS240901
                      quantity:
                        type: integer
                        example: 1
                      msrp:
                        type: number
                        example: 54900
                      discountPrice:
                        type: number
                        example: 54900
                      taxAndLicense:
                        type: number
                        example: 0
                      totalPrice:
                        type: number
                        example: 54900
                      standardOptions:
                        type: array
                        items:
                          type: string
                        example:
                          - 5.3L EcoTec3 V8 engine
                          - 10-speed automatic transmission
                          - Rear-Wheel Drive (RWD)
                          - Police-rated suspension package
                          - Brembo® heavy-duty front brakes
                          - 20" Black-painted aluminum wheels
                          - High-performance Firestone® Pursuit tires
                          - Engine and transmission oil coolers
                          - High-output alternator
                          - Vinyl floor covering with cloth seating
                upgrades:
                  type: array
                  description: Optional upgrades or upfitting costs.
                  items:
                    type: object
                    properties:
                      name:
                        type: string
                        example: Dana Safety Upfit (Quote #564500-A)
                      quantity:
                        type: integer
                        example: 1
                      price:
                        type: number
                        example: 26930.83
                      total:
                        type: number
                        example: 26930.83
                tradeIn:
                  type: object
                  description: Optional trade-in information.
                  properties:
                    year:
                      type: string
                      example: "2018"
                    make:
                      type: string
                      example: Ford
                    model:
                      type: string
                      example: Explorer
                    vin:
                      type: string
                      example: 1FMSK8DH2JGA12345
                    allowance:
                      type: number
                      example: 2000
                transport:
                  type: object
                  description: Optional transport cost information.
                  properties:
                    miles:
                      type: integer
                      example: 150
                    ratePerMile:
                      type: number
                      example: 2.0
                    total:
                      type: number
                      example: 300
      responses:
        '200':
          description: Successfully generated quote PDF.
          content:
            application/json:
              schema:
                type: object
                properties:
                  downloadUrl:
                    type: string
                    description: Direct link to the generated quote PDF.
                    example: https://docraptor.com/download/SAG-1001-AI.pdf
        '500':
          description: Internal server error
        '504':
          description: DocRaptor timed out before returning a download URL
