openapi: 3.1.0
info:
  title: Quote Builder API
  description: Generate government fleet quotes as downloadable PDFs using vehicle and pricing data.
  version: 1.0.1
servers:
  - url: https://quote-api-qflm.onrender.com
paths:
  /api/generate-quote:
    post:
      operationId: generateQuote
      summary: Generate a quote PDF
      description: >
        Submits vehicle, pricing, and customer data to generate a fleet quote as a downloadable PDF.
        The response includes a direct `downloadUrl` to the hosted PDF generated by DocRaptor.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [customer, dealership, vehicles]
              properties:
                quoteNumber:
                  type: string
                  description: Automatically generated quote number (e.g. SAG-1001-AI).
                customer:
                  type: string
                  description: The name of the customer or government agency receiving the quote.
                  example: Hidalgo County
                dealership:
                  type: string
                  description: The name of the dealership issuing the quote.
                  example: Sames Bastrop CDJ
                vehicles:
                  type: array
                  description: List of vehicles included in the quote.
                  items:
                    type: object
                    required: [year, make, model, contract, quantity]
                    properties:
                      year:
                        type: string
                        example: "2025"
                      make:
                        type: string
                        example: Dodge
                      model:
                        type: string
                        example: Durango Pursuit
                      contract:
                        type: string
                        example: TIPS240901
                      quantity:
                        type: integer
                        example: 1
                      msrp:
                        type: number
                        example: 48000
                      discountPrice:
                        type: number
                        example: 45000
                      taxAndLicense:
                        type: number
                        example: 1000
                      totalPrice:
                        type: number
                        example: 46000
                      standardOptions:
                        type: array
                        items:
                          type: string
                        example: ["Leather Seats", "Bluetooth", "Backup Camera"]
                upgrades:
                  type: array
                  description: Optional upgrades or upfitting costs.
                  items:
                    type: object
                    properties:
                      name:
                        type: string
                        example: Dana Safety Upfit
                      quantity:
                        type: integer
                        example: 1
                      price:
                        type: number
                        example: 22000
                      total:
                        type: number
                        example: 22000
                tradeIn:
                  type: object
                  description: Optional trade-in information.
                  properties:
                    year:
                      type: string
                      example: "2018"
                    make:
                      type: string
                      example: Ford
                    model:
                      type: string
                      example: Explorer
                    vin:
                      type: string
                      example: 1FMSK8DH2JGA12345
                    allowance:
                      type: number
                      example: 2000
                transport:
                  type: object
                  description: Optional transport cost information.
                  properties:
                    miles:
                      type: integer
                      example: 250
                    ratePerMile:
                      type: number
                      example: 2.0
                    total:
                      type: number
                      example: 500
      responses:
        '200':
          description: Successfully generated quote PDF.
          content:
            application/json:
              schema:
                type: object
                properties:
                  downloadUrl:
                    type: string
                    description: Direct link to the generated quote PDF.
                    example: https://docraptor.com/download/abc123-SAG-1001-AI.pdf
        '500':
          description: Internal server error
        '504':
          description: DocRaptor timed out before returning a download URL
